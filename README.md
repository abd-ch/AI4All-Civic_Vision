# Barcelona Civic Vision

> **A civic participation platform empowering Barcelona citizens to propose, visualize, and evaluate changes to public spaces through AI-assisted urban planning.**

<p align="center">
  <img src="https://img.shields.io/badge/Status-Proof%20of%20Concept-orange" alt="Status: Proof of Concept">
  <img src="https://img.shields.io/badge/React-19.2-blue" alt="React 19.2">
  <img src="https://img.shields.io/badge/TypeScript-5.9-blue" alt="TypeScript 5.9">
  <img src="https://img.shields.io/badge/Mapbox%20GL-3.18-green" alt="Mapbox GL 3.18">
</p>

---

## ğŸ¯ Project Vision

**Barcelona Civic Vision** reimagines civic participation by combining immersive 3D mapping, AI-generated visualizations, and expert-level feedback systems. Citizens can:

1. **Navigate Barcelona in 3D** â€” Explore the city with a realistic map showing buildings, streets, and landmarks
2. **Propose Changes** â€” Select public spaces and describe desired modifications (e.g., "Add a community garden" or "Install bike lanes")
3. **See AI Visualizations** â€” Receive photorealistic before/after images generated by AI
4. **Get Expert Feedback** â€” Five specialist AI agents (Budget, Heritage, Safety, Sociologist, Regulations) instantly evaluate feasibility, costs, and impacts

This platform bridges the gap between citizen ideas and municipal decision-making, democratizing urban planning through technology.

---

## ğŸ“ Current Status: Proof of Concept (Phase 0-1)

**âš ï¸ This is a functional prototype demonstrating UI/UX and design concepts.** 

### âœ… What Works Now
- **3D Interactive Map** â€” Fully navigable Mapbox GL map centered on Barcelona with building extrusions, camera controls (pan, zoom, rotate, tilt)
- **5 Pre-Populated Hotspots** â€” PlaÃ§a Catalunya, La Rambla, Passeig de GrÃ cia, Barceloneta Beach, Park GÃ¼ell Upper Terrace
- **Proposal Panels** â€” Click any hotspot to see mock proposals with:
  - Before/after image comparison slider
  - User info (name, age)
  - Proposal prompt/description
  - Agent feedback cards with scores (1-5)
  - 5-axis radar chart visualizing agent evaluations
- **Heatmap Layer** â€” Shows proposal density across the city (mock data)
- **Dieter Rams Design System** â€” Minimalist UI with warm neutral palette (#F5F0EB background, #D4763C orange accent)

### âŒ What's NOT Connected Yet
- **User Accounts** â€” No login/registration (planned Phase 5)
- **Real-time Image Generation** â€” No Gemini API integration; images are manually created (planned Phase 3)
- **Live Agent Evaluation** â€” Agent feedback is pre-written, not dynamically generated (planned Phase 4)
- **Community Submissions** â€” Users cannot submit new proposals; data is static JSON (planned Phase 5-6)
- **Street View Integration** â€” No Google Street View POV capture (planned Phase 2)

**Purpose of this PoC:** Demonstrate the complete user journey and visual design to stakeholders, validate UI/UX concepts, and establish technical architecture before building backend infrastructure.

---

## ğŸ—ï¸ Architecture

### Tech Stack
| Layer | Technology | Purpose |
|-------|-----------|---------|
| **Frontend** | React 19.2 + TypeScript 5.9 + Vite 7.3 | Fast, type-safe, modern development |
| **3D Map** | Mapbox GL JS 3.18 via `react-map-gl` | Realistic 3D buildings, heatmaps, smooth camera controls |
| **State Management** | Zustand | Minimal global state without boilerplate |
| **Data Visualization** | Recharts | Responsive radar charts for agent scores |
| **Design System** | CSS Variables + Modules | Dieter Rams aesthetic with scalable theming |
| **AI (Future)** | Gemini 2.5 Flash Image + Text APIs | Image generation and multi-agent evaluation |

### Architecture Diagram
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           FRONTEND (React + TS)                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ 3D Map   â”‚â†’ â”‚ Proposal â”‚â†’ â”‚  Agent   â”‚     â”‚
â”‚  â”‚ Mapbox   â”‚  â”‚  Panel   â”‚  â”‚  Panel   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Local JSON      â”‚  â† Current Phase
         â”‚   Mock Data       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   FUTURE BACKEND  â”‚  â† Phases 2-6
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚  â”‚ Gemini API  â”‚  â”‚  (Image Gen)
         â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
         â”‚  â”‚ 5 AI Agents â”‚  â”‚  (Evaluation)
         â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
         â”‚  â”‚ Auth (JWT)  â”‚  â”‚  (Users)
         â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
         â”‚  â”‚ Database    â”‚  â”‚  (Persistence)
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Getting Started

### Prerequisites
- **Node.js** 18+ and npm
- **Modern browser** with WebGL support (Chrome, Firefox, Edge â€” **not** Safari or VS Code Simple Browser)
- **Mapbox account** (free tier) â†’ [Get API token](https://account.mapbox.com/access-tokens/)

### Installation

```bash
# Clone the repository
git clone <your-repo-url>
cd barcelona-civic-vision

# Install dependencies
npm install

# Create environment file
cp .env.example .env

# Add your Mapbox token to .env
# VITE_MAPBOX_TOKEN=your_token_here
```

### Running the Development Server

```bash
npm run dev
```

Open **http://localhost:5173** in your browser.

### Build for Production

```bash
npm run build
npm run preview  # Preview production build locally
```

---

## ğŸ¨ Design System: Dieter Rams Principles

Inspired by Braun industrial design â€” clean, functional, timeless.

### Color Palette
| Name | Hex | Usage |
|------|-----|-------|
| Warm Off-White | `#F5F0EB` | Background, main surface |
| Light Warm Gray | `#E8E2DB` | Cards, panels |
| Charcoal Black | `#2C2C2C` | Primary text |
| Medium Gray | `#7A7A7A` | Secondary text, labels |
| **Braun Orange** | `#D4763C` | Accent, buttons, hotspots |
| Muted Green | `#6B8F71` | Success states |
| Warm Amber | `#C4943A` | Warnings |
| Muted Red | `#B5574B` | Errors |

### Typography
- **Primary:** Inter (geometric, clean, excellent screen readability)
- **Scale:** 12px / 14px / 16px / 20px / 28px / 40px â€” minimal hierarchy

---

## ğŸ“‚ Project Structure

```
barcelona-civic-vision/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ images/               # Before/after proposal images
â”‚   â”‚   â”œâ”€â”€ placa-catalunya-original.jpg
â”‚   â”‚   â”œâ”€â”€ placa-catalunya-generated.jpg
â”‚   â”‚   â””â”€â”€ ... (10 images total)
â”‚   â””â”€â”€ favicon.svg           # BCN logo
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ map/              # MapView, HotspotMarker, HeatmapLayer
â”‚   â”‚   â”œâ”€â”€ proposal/         # ProposalPanel, ImageComparison, PromptInput
â”‚   â”‚   â”œâ”€â”€ agents/           # AgentPanel, AgentCard (radar chart + feedback)
â”‚   â”‚   â””â”€â”€ ui/               # Header, layout components
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ hotspots.ts       # 5 Barcelona location definitions
â”‚   â”‚   â””â”€â”€ mockProposals.ts  # Pre-populated proposals with agent feedback
â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â””â”€â”€ useAppStore.ts    # Zustand global state
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts          # TypeScript interfaces
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â””â”€â”€ globals.css       # CSS variables, theme, reset
â”‚   â””â”€â”€ App.tsx               # Main application component
â”œâ”€â”€ .env                      # Mapbox API token (gitignored)
â”œâ”€â”€ package.json
â””â”€â”€ vite.config.ts
```

---

## ğŸ—ºï¸ Demo Locations

The PoC includes 5 manually curated Barcelona locations:

1. **PlaÃ§a Catalunya** â€” Central square with fountain proposal
2. **La Rambla** â€” Iconic boulevard with bike lane proposal  
3. **Passeig de GrÃ cia** â€” Modernista avenue with digital art panels proposal
4. **Barceloneta Beach** â€” Urban beach with recycled pavilion proposal
5. **Park GÃ¼ell Upper Terrace** â€” UNESCO site with sensory garden proposal

Each location has:
- Realistic GPS coordinates
- Neighborhood and area data
- Original POV image (Street View screenshot)
- AI-generated modified image
- Detailed agent feedback with scores

---

## ğŸ¤– AI Agent System (Mock Data)

Five specialist agents evaluate every proposal:

| Agent | Icon | Role | Score Range |
|-------|------|------|-------------|
| **Budget** | ğŸ’° | Municipal cost analysis | 1-5 (1=expensive, 5=cost-efficient) |
| **Heritage** | ğŸ›ï¸ | Cultural preservation review | 1-5 (1=restricted, 5=compatible) |
| **Safety** | ğŸ›¡ï¸ | Public safety engineering | 1-5 (1=risky, 5=safe) |
| **Sociologist** | ğŸ‘¥ | Community impact assessment | 1-5 (1=negative impact, 5=highly beneficial) |
| **Regulations** | ğŸ“‹ | Legal compliance check | 1-5 (1=long approval, 5=straightforward) |

**Current Implementation:** Feedback is manually written to demonstrate realistic responses. Future phases will connect to Gemini API with system prompts for dynamic evaluation.

---

## ğŸ› ï¸ Development Roadmap

### âœ… Phase 0-1: Proof of Concept (COMPLETE)
- 3D map with 5 hotspots
- Full UI/UX implementation
- Mock data infrastructure
- Dieter Rams design system

### ğŸ”„ Phase 2: Street View Integration (Planned)
- Google Street View POV capture
- User-selected viewpoint functionality

### ğŸ”„ Phase 3: AI Image Generation (Planned)
- Gemini 2.5 Flash Image API integration
- Real-time before/after generation
- Prompt engineering for architectural visualization

### ğŸ”„ Phase 4: AI Agent Evaluation (Planned)
- Gemini 2.5 Flash text API for 5 agents
- Dynamic scoring and feedback generation
- Location context assembly

### ğŸ”„ Phase 5: User Accounts (Planned)
- Authentication (JWT)
- Proposal submission and persistence
- User history and profiles

### ğŸ”„ Phase 6: Community Features (Planned)
- Live heatmap from user submissions
- Voting and comment system
- Municipal admin dashboard

---

## ğŸ“ Academic Context

This project is part of a master's thesis at **IAAC (Institute for Advanced Architecture of Catalonia)** exploring the intersection of:
- **Participatory Urban Planning**
- **AI-Assisted Decision Making**
- **Civic Technology**
- **Human-Centered Design**

**Research Questions:**
- Can AI democratize urban planning by lowering barriers to civic participation?
- How do citizens respond to AI-generated visualizations of their ideas?
- What role should specialist AI agents play in feasibility assessment?

---

## ğŸ“œ License

MIT License â€” Feel free to use this project for academic or personal purposes.

---

## ğŸ™ Acknowledgments

- **Mapbox** â€” 3D mapping infrastructure
- **Recharts** â€” Data visualization
- **Dieter Rams** â€” Design philosophy inspiration
- **Barcelona City Council** â€” Urban data and inspiration

---

## ğŸ“§ Contact

For questions, collaboration, or feedback about this project, please open an issue or reach out via GitHub.

---

**Built with â¤ï¸ in Barcelona**
